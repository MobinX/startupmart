{
  "openapi": "3.0.0",
  "info": {
    "title": "StartupMart API",
    "description": "API for the StartupMart investment platform, connecting startup owners with investors.",
    "version": "1.0.0"
  },
  "servers": [
    {
      "url": "https://startupmart.mobin.workers.dev/",
      "description": "Production server"
    },
    {
      "url": "http://localhost:3000/",
      "description": "Development server"
    },
    {
      "url": "http://192.168.0.212:3000/",
      "description": "Development2 server"
    }
  ],
  "components": {
    "securitySchemes": {
      "bearerAuth": {
        "type": "http",
        "scheme": "bearer",
        "bearerFormat": "JWT"
      }
    },
    "schemas": {
      "Error": {
        "type": "object",
        "properties": {
          "error": {
            "type": "string"
          },
          "details": {
            "type": "array",
            "items": {
              "type": "object"
            }
          }
        }
      },
      "User": {
        "type": "object",
        "properties": {
          "id": { "type": "integer" },
          "email": { "type": "string", "format": "email" },
          "role": { "type": "string", "enum": ["startup_owner", "investor"] },
          "currentPricingPlan": { "type": "string", "enum": ["free", "premium"] },
          "stats": {
            "type": "object",
            "properties": {
              "startupCount": { "type": "integer" },
              "favoriteCount": { "type": "integer" },
              "totalViews": { "type": "integer" }
            }
          }
        }
      },
      "StartupSummary": {
        "type": "object",
        "properties": {
          "id": { "type": "integer" },
          "name": { "type": "string" },
          "industry": { "type": "string" },
          "yearFounded": { "type": "integer" },
          "description": { "type": "string" },
          "websiteLink": { "type": "string" },
          "founderBackground": { "type": "string" },
          "teamSize": { "type": "integer" },
          "sellEquity": { "type": "boolean" },
          "sellBusiness": { "type": "boolean" },
          "reasonForSelling": { "type": "string" },
          "desiredBuyerProfile": { "type": "string" },
          "askingPrice": { "type": "number" },
          "createdAt": { "type": "string", "format": "date-time" }
        }
      },
      "StartupDetails": {
        "allOf": [
          { "$ref": "#/components/schemas/StartupSummary" },
          {
            "type": "object",
            "properties": {
              "financials": {
                "type": "object",
                "properties": {
                  "monthlyRevenue": { "type": "object", "additionalProperties": { "type": "number" } },
                  "annualRevenue": { "type": "object", "additionalProperties": { "type": "number" } },
                  "monthlyProfitLoss": { "type": "number" },
                  "grossMargin": { "type": "number" },
                  "operationalExpense": { "type": "number" },
                  "cashRunway": { "type": "number" },
                  "fundingRaised": { "type": "number" },
                  "valuationExpectation": { "type": "number" }
                }
              },
              "traction": {
                "type": "object",
                "properties": {
                  "totalCustomers": { "type": "integer" },
                  "monthlyActiveCustomers": { "type": "integer" },
                  "customerGrowthYoy": { "type": "number" },
                  "customerRetentionRate": { "type": "number" },
                  "churnRate": { "type": "number" },
                  "majorClients": { "type": "string" },
                  "completedOrders": { "type": "integer" }
                }
              },
              "salesMarketing": {
                "type": "object",
                "properties": {
                  "salesChannels": { "type": "string" },
                  "cac": { "type": "number" },
                  "ltv": { "type": "number" },
                  "marketingPlatforms": { "type": "string" },
                  "conversionRate": { "type": "number" }
                }
              },
              "operational": {
                "type": "object",
                "properties": {
                  "supplyChainModel": { "type": "string" },
                  "cogs": { "type": "number" },
                  "averageDeliveryTime": { "type": "string" },
                  "inventoryData": { "type": "string" }
                }
              },
              "legal": {
                "type": "object",
                "properties": {
                  "tradeLicenseNumber": { "type": "string" },
                  "taxId": { "type": "string" },
                  "verifiedPhone": { "type": "string" },
                  "verifiedEmail": { "type": "string" },
                  "ownershipDocumentsLink": { "type": "string" },
                  "ndaFinancialsLink": { "type": "string" }
                }
              },
              "assets": {
                "type": "object",
                "properties": {
                  "domainOwnership": { "type": "string" },
                  "patentsOrCopyrights": { "type": "string" },
                  "sourceCodeLink": { "type": "string" },
                  "softwareInfrastructure": { "type": "string" },
                  "socialMediaHandles": { "type": "string" }
                }
              },
              "contacts": {
                "type": "object",
                "properties": {
                  "contactEmail": { "type": "string" },
                  "contactPhone": { "type": "string" }
                }
              },
              "viewCount": { "type": "integer" }
            }
          }
        ]
      },
      "StartupPost": {
        "type": "object",
        "required": [
          "name",
          "industry",
          "yearFounded",
          "description",
          "founderBackground",
          "teamSize",
          "sellEquity",
          "sellBusiness",
          "reasonForSelling",
          "desiredBuyerProfile"
        ],
        "properties": {
          "name": { "type": "string", "minLength": 1 },
          "industry": { "type": "string", "minLength": 1 },
          "yearFounded": { "type": "integer" },
          "description": { "type": "string", "minLength": 1 },
          "websiteLink": { "type": "string", "format": "uri", "nullable": true },
          "founderBackground": { "type": "string", "minLength": 1 },
          "teamSize": { "type": "integer", "minimum": 1 },
          "sellEquity": { "type": "boolean" },
          "sellBusiness": { "type": "boolean" },
          "reasonForSelling": { "type": "string", "minLength": 1 },
          "desiredBuyerProfile": { "type": "string", "minLength": 1 },
          "askingPrice": { "type": "number", "exclusiveMinimum": 0, "nullable": true },
          "financials": {
            "type": "object",
            "properties": {
              "monthlyRevenue": { "type": "object", "additionalProperties": { "type": "number" }, "nullable": true },
              "annualRevenue": { "type": "object", "additionalProperties": { "type": "number" }, "nullable": true },
              "monthlyProfitLoss": { "type": "number", "nullable": true },
              "grossMargin": { "type": "number", "minimum": 0, "maximum": 100, "nullable": true },
              "operationalExpense": { "type": "number", "nullable": true },
              "cashRunway": { "type": "number", "nullable": true },
              "fundingRaised": { "type": "number", "nullable": true },
              "valuationExpectation": { "type": "number", "nullable": true }
            },
            "nullable": true
          },
          "traction": {
            "type": "object",
            "properties": {
              "totalCustomers": { "type": "integer", "nullable": true },
              "monthlyActiveCustomers": { "type": "integer", "nullable": true },
              "customerGrowthYoy": { "type": "number", "nullable": true },
              "customerRetentionRate": { "type": "number", "minimum": 0, "maximum": 100, "nullable": true },
              "churnRate": { "type": "number", "minimum": 0, "maximum": 100, "nullable": true },
              "majorClients": { "type": "string", "nullable": true },
              "completedOrders": { "type": "integer", "nullable": true }
            },
            "nullable": true
          },
          "salesMarketing": {
            "type": "object",
            "properties": {
              "salesChannels": { "type": "string", "nullable": true },
              "cac": { "type": "number", "nullable": true },
              "ltv": { "type": "number", "nullable": true },
              "marketingPlatforms": { "type": "string", "nullable": true },
              "conversionRate": { "type": "number", "minimum": 0, "maximum": 100, "nullable": true }
            },
            "nullable": true
          },
          "operational": {
            "type": "object",
            "properties": {
              "supplyChainModel": { "type": "string", "nullable": true },
              "cogs": { "type": "number", "nullable": true },
              "averageDeliveryTime": { "type": "string", "nullable": true },
              "inventoryData": { "type": "string", "nullable": true }
            },
            "nullable": true
          },
          "legal": {
            "type": "object",
            "properties": {
              "tradeLicenseNumber": { "type": "string", "nullable": true },
              "taxId": { "type": "string", "nullable": true },
              "verifiedPhone": { "type": "string", "nullable": true },
              "verifiedEmail": { "type": "string", "format": "email", "nullable": true },
              "ownershipDocumentsLink": { "type": "string", "nullable": true },
              "ndaFinancialsLink": { "type": "string", "nullable": true }
            },
            "nullable": true
          },
          "assets": {
            "type": "object",
            "properties": {
              "domainOwnership": { "type": "string", "nullable": true },
              "patentsOrCopyrights": { "type": "string", "nullable": true },
              "sourceCodeLink": { "type": "string", "nullable": true },
              "softwareInfrastructure": { "type": "string", "nullable": true },
              "socialMediaHandles": { "type": "string", "nullable": true }
            },
            "nullable": true
          },
          "contacts": {
            "type": "object",
            "properties": {
              "contactEmail": { "type": "string", "format": "email", "nullable": true },
              "contactPhone": { "type": "string", "nullable": true }
            },
            "nullable": true
          }
        }
      },
      "Plan": {
        "type": "object",
        "properties": {
          "id": { "type": "integer" },
          "name": { "type": "string" },
          "planFor": { "type": "string", "enum": ["investor", "startup_owner"] },
          "allowedFields": {
            "type": "array",
            "items": { "type": "string" },
            "description": "List of fields or sections this plan grants access to (e.g., 'financials', 'startupRevenue')"
          },
          "price": { "type": "number" },
          "description": { "type": "string" },
          "createdAt": { "type": "string", "format": "date-time" },
          "isSubscribed": { "type": "boolean" },
          "subscriptionActive": { "type": "boolean" }
        }
      },
      "Subscription": {
        "type": "object",
        "properties": {
          "id": { "type": "integer" },
          "userId": { "type": "integer" },
          "planId": { "type": "integer" },
          "isActive": { "type": "boolean" },
          "startedAt": { "type": "string", "format": "date-time" },
          "expiresAt": { "type": "string", "format": "date-time", "nullable": true }
        }
      }
    }
  },
  "paths": {
    "/api/auth/verify": {
      "post": {
        "summary": "Verify Authentication Token",
        "description": "Verifies the Bearer token and returns the authenticated user's profile.",
        "security": [{ "bearerAuth": [] }],
        "responses": {
          "200": {
            "description": "Token is valid",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "user": { "$ref": "#/components/schemas/User" }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Invalid or missing token",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/Error" }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/Error" }
              }
            }
          }
        }
      }
    },
    "/api/users": {
      "get": {
        "summary": "Get Current User Profile",
        "security": [{ "bearerAuth": [] }],
        "responses": {
          "200": {
            "description": "User profile retrieved successfully",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/User" }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/Error" }
              }
            }
          },
          "404": {
            "description": "User not found",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/Error" }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/Error" }
              }
            }
          }
        }
      },
      "put": {
        "summary": "Update User Profile",
        "security": [{ "bearerAuth": [] }],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "email": { "type": "string", "format": "email" },
                  "role": { "type": "string", "enum": ["startup_owner", "investor"] }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Profile updated successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "user": { "$ref": "#/components/schemas/User" },
                    "message": { "type": "string" }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Invalid input data",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/Error" }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/Error" }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/Error" }
              }
            }
          }
        }
      }
    },
    "/api/users/plan": {
      "put": {
        "summary": "Update User Pricing Plan",
        "security": [{ "bearerAuth": [] }],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": ["plan"],
                "properties": {
                  "plan": { "type": "string", "enum": ["free", "premium"] }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Plan updated successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "user": { "$ref": "#/components/schemas/User" },
                    "message": { "type": "string" }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Invalid plan",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/Error" }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/Error" }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/Error" }
              }
            }
          }
        }
      }
    },
    "/api/startups": {
      "get": {
        "summary": "List Public Startups",
        "description": "Get a list of startups with optional filtering. Returns summary information.",
        "parameters": [
          { "name": "industry", "in": "query", "schema": { "type": "string" } },
          { "name": "minTeamSize", "in": "query", "schema": { "type": "integer" } },
          { "name": "maxTeamSize", "in": "query", "schema": { "type": "integer" } },
          { "name": "sellEquity", "in": "query", "schema": { "type": "boolean" } },
          { "name": "sellBusiness", "in": "query", "schema": { "type": "boolean" } }
        ],
        "responses": {
          "200": {
            "description": "List of startups",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "startups": {
                      "type": "array",
                      "items": { "$ref": "#/components/schemas/StartupSummary" }
                    }
                  }
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/Error" }
              }
            }
          }
        }
      },
      "post": {
        "summary": "Create Startup Profile",
        "description": "Create a new startup profile. Requires 'startup_owner' role.",
        "security": [{ "bearerAuth": [] }],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": { "$ref": "#/components/schemas/StartupPost" }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Startup created successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "startup": { "$ref": "#/components/schemas/StartupSummary" },
                    "message": { "type": "string" }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Invalid input data",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/Error" }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/Error" }
              }
            }
          },
          "403": {
            "description": "Forbidden (Not a startup owner)",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/Error" }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/Error" }
              }
            }
          }
        }
      }
    },
    "/api/startups/{id}": {
      "get": {
        "summary": "Get Startup Details",
        "description": "Get detailed information about a startup. Access to specific fields is controlled by the user's subscribed plans. Owners see full details.",
        "parameters": [
          { "name": "id", "in": "path", "required": true, "schema": { "type": "integer" } }
        ],
        "security": [{ "bearerAuth": [] }],
        "responses": {
          "200": {
            "description": "Startup details retrieved",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "startup": { "$ref": "#/components/schemas/StartupDetails" },
                    "allowedFields": {
                      "type": "array",
                      "items": { "type": "string" },
                      "description": "List of fields the user is allowed to see"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/Error" }
              }
            }
          },
          "403": {
            "description": "Forbidden (No active plan or insufficient permissions)",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/Error" }
              }
            }
          },
          "404": {
            "description": "Startup not found",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/Error" }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/Error" }
              }
            }
          }
        }
      },
      "put": {
        "summary": "Update Startup Profile",
        "description": "Update an existing startup. Only the owner can update.",
        "parameters": [
          { "name": "id", "in": "path", "required": true, "schema": { "type": "integer" } }
        ],
        "security": [{ "bearerAuth": [] }],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": { "$ref": "#/components/schemas/StartupDetails" }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Startup updated successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "startup": { "$ref": "#/components/schemas/StartupSummary" },
                    "message": { "type": "string" }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Invalid input data",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/Error" }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/Error" }
              }
            }
          },
          "403": {
            "description": "Forbidden (Not the owner)",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/Error" }
              }
            }
          },
          "404": {
            "description": "Startup not found",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/Error" }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/Error" }
              }
            }
          }
        }
      },
      "delete": {
        "summary": "Delete Startup Profile",
        "description": "Delete a startup. Only the owner can delete.",
        "parameters": [
          { "name": "id", "in": "path", "required": true, "schema": { "type": "integer" } }
        ],
        "security": [{ "bearerAuth": [] }],
        "responses": {
          "200": {
            "description": "Startup deleted successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": { "type": "string" }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/Error" }
              }
            }
          },
          "403": {
            "description": "Forbidden (Not the owner)",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/Error" }
              }
            }
          },
          "404": {
            "description": "Startup not found",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/Error" }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/Error" }
              }
            }
          }
        }
      }
    },
    "/api/favorites": {
      "get": {
        "summary": "Get User Favorites",
        "security": [{ "bearerAuth": [] }],
        "responses": {
          "200": {
            "description": "List of favorite startups",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "favorites": {
                      "type": "array",
                      "items": { "$ref": "#/components/schemas/StartupSummary" }
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/Error" }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/Error" }
              }
            }
          }
        }
      },
      "post": {
        "summary": "Add to Favorites",
        "security": [{ "bearerAuth": [] }],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": ["startupId"],
                "properties": {
                  "startupId": { "type": "integer" }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Added to favorites",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": { "type": "string" }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Invalid input data",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/Error" }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/Error" }
              }
            }
          },
          "404": {
            "description": "Startup not found",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/Error" }
              }
            }
          },
          "409": {
            "description": "Already in favorites",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/Error" }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/Error" }
              }
            }
          }
        }
      },
      "delete": {
        "summary": "Remove from Favorites",
        "security": [{ "bearerAuth": [] }],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": ["startupId"],
                "properties": {
                  "startupId": { "type": "integer" }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Removed from favorites",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": { "type": "string" }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Invalid input data",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/Error" }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/Error" }
              }
            }
          },
          "404": {
            "description": "Startup or favorite not found",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/Error" }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/Error" }
              }
            }
          }
        }
      }
    },
    "/api/plans": {
      "get": {
        "summary": "List All Plans",
        "parameters": [
          { "name": "planFor", "in": "query", "schema": { "type": "string", "enum": ["investor", "startup_owner"] } }
        ],
        "responses": {
          "200": {
            "description": "List of plans",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "plans": {
                      "type": "array",
                      "items": { "$ref": "#/components/schemas/Plan" }
                    }
                  }
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/Error" }
              }
            }
          }
        }
      },
      "post": {
        "summary": "Create New Plan",
        "description": "Create a new subscription plan. (Admin only)",
        "security": [{ "bearerAuth": [] }],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": ["name", "planFor", "allowedFields", "price"],
                "properties": {
                  "name": { "type": "string" },
                  "planFor": { "type": "string", "enum": ["investor", "startup_owner"] },
                  "allowedFields": { "type": "array", "items": { "type": "string" } },
                  "price": { "type": "number" },
                  "description": { "type": "string" }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Plan created",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "plan": { "$ref": "#/components/schemas/Plan" },
                    "message": { "type": "string" }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Invalid input",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/Error" }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/Error" }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/Error" }
              }
            }
          }
        }
      }
    },
    "/api/plans/{id}": {
      "get": {
        "summary": "Get Plan Details",
        "parameters": [
          { "name": "id", "in": "path", "required": true, "schema": { "type": "integer" } }
        ],
        "responses": {
          "200": {
            "description": "Plan details",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "plan": { "$ref": "#/components/schemas/Plan" }
                  }
                }
              }
            }
          },
          "404": {
            "description": "Plan not found",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/Error" }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/Error" }
              }
            }
          }
        }
      },
      "put": {
        "summary": "Update Plan",
        "description": "Update an existing plan. (Admin only)",
        "parameters": [
          { "name": "id", "in": "path", "required": true, "schema": { "type": "integer" } }
        ],
        "security": [{ "bearerAuth": [] }],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": { "$ref": "#/components/schemas/Plan" }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Plan updated",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "plan": { "$ref": "#/components/schemas/Plan" },
                    "message": { "type": "string" }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Invalid input",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/Error" }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/Error" }
              }
            }
          },
          "404": {
            "description": "Plan not found",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/Error" }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/Error" }
              }
            }
          }
        }
      },
      "delete": {
        "summary": "Delete Plan",
        "description": "Delete a plan. (Admin only)",
        "parameters": [
          { "name": "id", "in": "path", "required": true, "schema": { "type": "integer" } }
        ],
        "security": [{ "bearerAuth": [] }],
        "responses": {
          "200": {
            "description": "Plan deleted",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": { "type": "string" }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/Error" }
              }
            }
          },
          "404": {
            "description": "Plan not found",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/Error" }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/Error" }
              }
            }
          }
        }
      }
    },
    "/api/plans/subscribe": {
      "get": {
        "summary": "Get User Subscriptions",
        "security": [{ "bearerAuth": [] }],
        "responses": {
          "200": {
            "description": "List of active subscriptions",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "plans": {
                      "type": "array",
                      "items": {
                        "allOf": [
                          { "$ref": "#/components/schemas/Plan" },
                          {
                            "type": "object",
                            "properties": {
                              "subscription": { "$ref": "#/components/schemas/Subscription" }
                            }
                          }
                        ]
                      }
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/Error" }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/Error" }
              }
            }
          }
        }
      },
      "post": {
        "summary": "Subscribe to Plan",
        "security": [{ "bearerAuth": [] }],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": ["planId"],
                "properties": {
                  "planId": { "type": "integer" },
                  "expiresAt": { "type": "string", "format": "date-time" }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Subscribed successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "subscription": { "$ref": "#/components/schemas/Subscription" },
                    "plan": { "$ref": "#/components/schemas/Plan" },
                    "message": { "type": "string" }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Invalid subscription data",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/Error" }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/Error" }
              }
            }
          },
          "404": {
            "description": "Plan not found",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/Error" }
              }
            }
          },
          "409": {
            "description": "Already subscribed",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/Error" }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/Error" }
              }
            }
          }
        }
      },
      "delete": {
        "summary": "Unsubscribe from Plan",
        "security": [{ "bearerAuth": [] }],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": ["planId"],
                "properties": {
                  "planId": { "type": "integer" }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Unsubscribed successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "subscription": { "$ref": "#/components/schemas/Subscription" },
                    "message": { "type": "string" }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Invalid plan ID",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/Error" }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/Error" }
              }
            }
          },
          "404": {
            "description": "Subscription not found",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/Error" }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/Error" }
              }
            }
          }
        }
      }
    }
  }
}